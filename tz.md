# Техническое задание и мысли

## Проблемы

- Размазанность websocket логики в vue
- [x] Ошибка если нет интернет подключения
- [+-] Интерфейс панели кнопок в комнате, необходимо менять в зависимости от типа (в целом можно поумнее сделать как нибудь)
- [x] без polymers.json проверка не будет работать (error вылезет, но программа продолжать работу)
- go: нужно разделить Room и Engine. Сейчас информация дублируется
- Задать middleware для авторизации(на конечном этапе)
- [x] critical: при одновременной перезагрузке и вытаскивании нового элемента (вероятно это не единственная последовательность действий) происходит Lock движка. Нужно разобраться

## В планах

- Убрать игрока во время процесса\*
- Нормальная мобильная вёрстка
- [+-] load screen на Hub`е
- готовность игроков, и автоматическое продолжение игры, если все готовы.

### В планах: ошибки
*Сделал*
До определенного времени в проекте не было состоявшейся системы ошибок.
На момент (commit 8e81731df203270b282264351f3e1b3ee4c19840) для `engine`
используется система основанная на diygoapi.
Нужно будет весь проект перенести на нее и переработать под задачи проекта.

## Надо 

- [x] Таймер не работает для обмена на фронте

- [ ] Нормальный интерфейс проверки

- [ ] Выйти из комнаты админу во время игры

- [x] Звуковой сигнал

- [x] Закрыть игру… (экстренное завершение)

- [x] Cтоп - игра с таймером

- [+-] Cделать фидбек на действия игрока

- [x] Нижняя точка (-2) в счёте игрока.

- [x] 45 cекунд на обмен в Каталист + таймер на обмен.

## Архитектурные шоколадки

- [x] фича: HandlerFunc в polymers может возвращать ошибку, -> перестаёт отвечать за unicast error.
  - [x] Сигнал для главного цикла polymersEngine, чтобы тот уведомил клиентов о изменениях.
        _или_
  - [ ] Можно пойти дальше и отслеживать изменения который произошли в движке. Отсылать только их. (Надо подумать как сделать)

## Тестирование 20 февраля 2025

**важный фактор**: Нужно настраивать локальную сетку, когда тестировали оказалось, что местный wifi не может предоставить стабильное подключение. (приносить свой роутер :Э?).

1. Добавить QR код на страницу админа с ссылкой на подлючение. Слишком много времени уходит у людей вводит IP адрес с портом. (Поставить по умолчанию 80 порт, и fallback`ать если он занят на другой свободный)
2. [x] При автоигре увеличить время выпадения первых фишек. Не успевают искать и доставать.
3. [x] ==UХ/UI== надо убрать дубль выпавшего элемента в блоке последних выпавших. Ребята путаются
4. [x] Нужно иметь возможность вручную начислять очки в случае форс мажоров (об этом далее)
5. Закрывать окна после ввода (всё  упирается в реализацию этого на websocket )
6. Указывать ошибку при вводе структуры (не понятно почему не дает вводить больше структур чем определено системой и тд)
7. [x] Возможность посмотреть количество выпавших элементов и оставшихся элементов (для отладки во время игры)
8. Возможность убрать блок выпавших элементов, в случае если есть проектор, который их показывает. (Заменить на текущий список СФ?)

**Ошибки валидации**: два раза за игру у игроков были заминки с проверкой структур. Надо проверить таблички и протестировать функции. (Бета Полиакрилонитрил: ложная инвалидация, H:4, C:4, N:2, CH:2, CH2: 0, 018Полиметилвиниловый эфир: не могли заменить CH на CH2 или что то подобное)
